"use strict";(self.webpackChunkKyruusProvidermatchConsumer=self.webpackChunkKyruusProvidermatchConsumer||[]).push([[177],{47931:(e,t,a)=>{a.r(t),a.d(t,{default:()=>ct});var i=a(37974),r=a(80669),o=a(49445),n=a(77544),s=a(82058),l=a(87462),c=a(67294),d=a(45424),p=a(15028),u=a(15861),h=a(29439),g=a(4942),v=a(64687),m=a.n(v),f=a(41438),y=a(27361),b=a.n(y),S=a(1656),_=a(387),P=a(87232),E=a(81769),k=a(47080),M=a(59914),w=a(45351),C=a(83643),R=a(60546),O=a(2729),x=a(86478),Z=a(93433),A=a(15671),I=a(43144),N=a(97326),U=a(60136),j=a(82963),B=a(61120),D=a(93754),q=a.n(D),F=a(35161),L=a.n(F),T=a(41609),H=a.n(T),G=a(37101),V=a(24300),z=a(17673),Q=a(16543),W=a.n(Q),K=a(1083),X=a.n(K),$=a(86344),J=a(53825),Y=a(22205),ee=a.n(Y),te=a(21804),ae=a.n(te),ie=a(31386),re=(0,G.defineMessages)({didyoumean:{id:"noresults.didyoumean",defaultMessage:"Did you mean {suggestion} in {categoryName}?"},suggestionsheader:{id:"noresults.suggestionsheader",defaultMessage:"Suggestions based on your search:"},browsebycommonspecialties:{id:"noresults.browsebycommonspecialties",defaultMessage:"Browse by Common Specialties"},noresults:{id:"noresults.noresults",defaultMessage:"No results match your search."},trymodifyingquery:{id:"noresults.trymodifyingquery",defaultMessage:"Please try removing filters or begin a new search for condition, name, term, etc...."}});function oe(e){var t=e.suggestion,a=e.getUpdatedSearch,i=e.log;return c.createElement(J.Z,{to:a(t.query_modifications),className:"fw-6 suggestions","data-action":"suggestion",onClick:function(){i("user_action.search_results.spell_suggestion_clicked",{suggestion:t.display_text,suggestion_type:t.display_search_type})}},t.display_text)}function ne(e){var t=e.suggestions,a=e.getUpdatedSearch,i=e.log;if(H()(t))return null;var r=L()(t,(function(e,t){var r=c.createElement(oe,{suggestion:e,getUpdatedSearch:a,log:i}),o=(0,ie.Qs)(e.display_search_type),n=c.createElement(G.FormattedMessage,o);return c.createElement("li",{className:"suggestion-message",key:t},c.createElement(G.FormattedMessage,(0,l.Z)({},re.didyoumean,{values:{suggestion:r,categoryName:n}})))}));return c.createElement("ul",{className:"list-m pa-m bc-soft"},c.createElement("h3",{className:"mb-s"},c.createElement(G.FormattedMessage,re.suggestionsheader)),r)}function se(e){var t=e.topSpecialties,a=e.getUpdatedSearch,i=e.log,r=e.history,o=L()(t,(function(e){var t=(0,Z.Z)((0,ie.Cg)(z.parse(r.location.search.substring(1))));e.query_modifications&&t.push.apply(t,(0,Z.Z)(e.query_modifications));var o=a(t);return c.createElement("div",{className:"pb-s no-wrap",key:e.display_text},c.createElement(J.Z,{to:o,id:"top-specialty-".concat(ae()(e.display_text)),className:"top-specialty",onClick:function(){i("user_action.search_results.no_results_browse_clicked",{link:e.display_text,type:"specialty"})}},c.createElement("h3",null,e.display_text)))}));return c.createElement("div",{className:"col-sm-6 col-xs-12"},o)}function le(e){var t=e.topSpecialties,a=e.getUpdatedSearch,i=e.log,r=e.history;if(H()(t))return null;var o=t.length/2,n=t.slice(0,o),s=t.slice(o),l=function(e){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return i(e,ee()({all_links:{specialties:L()(t,"display_text")}},a))};return c.createElement("div",{id:"top-specialties",className:"top-specialties pa-m mb-m bc-soft"},c.createElement("h3",{className:"pb-s"},c.createElement(G.FormattedMessage,re.browsebycommonspecialties)),c.createElement("div",{className:"row"},c.createElement(se,{topSpecialties:n,getUpdatedSearch:a,log:l,history:r}),c.createElement(se,{topSpecialties:s,getUpdatedSearch:a,log:l,history:r})))}const ce=function(e){var t=e.suggestions,a=e.topSpecialties,i=e.getUpdatedSearch,r=e.searchQuery,o=e.log,n=e.history;return c.createElement("div",null,c.createElement("div",{className:"no-results ma-xl"},c.createElement("div",{className:"container-fluid"},c.createElement("div",{className:"row"},c.createElement("div",{className:"col-md-12"},c.createElement("h2",{className:"mb-s"},c.createElement(G.FormattedMessage,re.noresults)),c.createElement("h4",{className:"mb-l"},c.createElement(G.FormattedMessage,re.trymodifyingquery)),c.createElement(ne,{suggestions:t,getUpdatedSearch:i,searchQuery:r,log:o}))))),c.createElement(le,{topSpecialties:a,getUpdatedSearch:i,log:o,history:n}))};var de=a(78865),pe=a(70690),ue=a(54617),he=a(18029),ge=a.n(he),ve=a(97069),me=a(754),fe=a.n(me),ye=(0,V.Z)((0,G.injectIntl)((function(e){var t=e.appliedTerms,a=e.filter,i=e.getUpdatedSearch,r=e.history;return t.filter((function(e){return null==e?void 0:e.applied})).map((function(e){var t={id:"field.name.".concat(a),defaultMessage:ge()(a),description:"The name displayed above the facet"},o={id:"field.value.".concat(a,".").concat(e.value),defaultMessage:"".concat(e.value),description:"Facet for provider search"};return c.createElement(fe(),{color:"primary",label:c.createElement("span",null,c.createElement(G.FormattedMessage,t),": ",c.createElement(G.FormattedMessage,o)),key:"".concat(a,":").concat(e.value),onDelete:function(){return r.push(i([{action:"delete_key_value",key:"filter",value:"".concat(a,":").concat(e.value)}]))}})}))}))),be=(0,V.Z)((0,G.injectIntl)((function(e){var t=e.searchSummary,a=e.getUpdatedSearch,i=e.history,r={id:"facet_chips.location",description:"Summary of search location information",defaultMessage:"Within {distance, plural, =0 {any miles} one {# mile} other {# miles}} of {location}",values:{location:t.display_location,distance:t.distance}};return c.createElement(fe(),{color:"primary","data-testid":"filter-chip-location",label:c.createElement(G.FormattedMessage,r),onDelete:function(){return i.push(a([{action:"delete_key",key:"display_location"},{action:"delete_key",key:"location"},{action:"delete_key",key:"distance"}]))}})}))),Se=function(e){return!function(e){return"location"===e.field||"locations.primary_marketable_location_id"===e.field}(e)&&function(e){var t;return!(null==e||null===(t=e.terms)||void 0===t||!t.length)}(e)};function _e(e){var t=e.facets,a=e.getUpdatedSearch,i=e.searchSummary,r=t.filter(Se).map((function(e){return c.createElement(ye,{appliedTerms:e.terms,filter:e.field,getUpdatedSearch:a,key:e.field})}));return c.createElement(ve.lR,null,i.display_location&&c.createElement(be,{searchSummary:i,getUpdatedSearch:a}),r)}var Pe=a(84486),Ee=a.n(Pe),ke=a(96026),Me=a.n(ke),we=a(40554),Ce=a.n(we),Re=a(77221),Oe=(0,G.defineMessages)({gotoPreviousPage:{id:"aria.label.gotoPreviousPage",defaultMessage:"Go to previous page"},gotoNextPage:{id:"aria.label.gotoNextPage",defaultMessage:"Go to next page"},gotoPage:{id:"aria.label.gotopage",defaultMessage:"Go to page {page}"},paginationControls:{id:"aria.label.paginationControls",defaultMessage:"Results Page"}}),xe=(0,Re.XL)(J.Z);const Ze=(0,G.injectIntl)((function(e){var t=e.searchSummary,a=e.totalPages,i=e.getUpdatedSearch,r=e.log,o=e.intl,n=Ce()(t.page)||1,s=L()(function(e,t){var a=[{text:"«",value:e-1},{text:1,value:1}],i=Math.max(e-2,2),r=Math.min(e+2,t);return i>2&&a.push({text:"...",value:-1}),Ee()(Me()(i,r+1),(function(e){a.push({text:e,value:e})})),r+1<t&&a.push({text:"...",value:-2}),r<t&&a.push({text:t,value:t}),a.push({text:"»",value:e+1}),a}(n,a),(function(e){var t=Oe.gotoPage;"«"===e.text?t=Oe.gotoPreviousPage:"»"===e.text&&(t=Oe.gotoNextPage);var o,s,d="".concat(e.text,"-").concat(e.value),p={};return e.value<1||e.value>a?(o="disabled",s=c.createElement("span",null,e.text),p={"aria-hidden":!0}):e.value==n?(o="active",s=c.createElement("span",{name:e.value,"aria-current":"page"},e.text)):s=c.createElement(xe,{"data-testid":"LinkToPage".concat(e.value),to:i([{action:"append",key:"page",value:e.value}]),name:e.value,onClick:function(){return r("user_action.search_results.page_results",{page_num:e.value,button_clicked:e.text,total_pages:a})},intlProps:{"aria-label":{descriptor:t,values:{page:e.value}}}},e.text),c.createElement("li",(0,l.Z)({key:d},p,{className:o}),s)}));return c.createElement("nav",{className:"col-md-8 col-xs-12 pagination-col hidden-print","data-current-page":t.page,"data-total-pages":a,"data-view":"paging","aria-label":o.formatMessage(Oe.paginationControls)},c.createElement("ul",{className:"pagination no-bullets mb-l"},s))}));var Ae=a(33087),Ie=a(45474),Ne=(0,G.defineMessages)({disclaimertext:{id:"providerlist.footer.disclaimertext",defaultMessage:"Appointment availability is subject to change"}});function Ue(e){var t=e.searchSummary,a=e.showDisclaimer,i=e.totalPages,r=e.getUpdatedSearch,o=e.config,n=e.log,s=i>1,l=null,d=null;s&&(l=c.createElement(Ze,{searchSummary:t,totalPages:i,getUpdatedSearch:r,log:n})),a&&(d=c.createElement("div",{className:"row"},c.createElement("div",{id:"availability-disclaimer-text",className:"col-xs-12 fs-xs fc-gray-2"},"*",c.createElement(G.FormattedMessage,Ne.disclaimertext))));var p=(0,Ie.fL)(),u=p.enabled,h=p.crmConnector.hasReferrals;return c.createElement("div",{id:"search-footer"},c.createElement("div",{className:"row ".concat(u&&h()?"logo-pagination-crm":"logo-pagination")},l,c.createElement(Ae.Z,{config:o,className:s?"col-md-4 col-xs-12":"col-md-12"})),d)}var je=(0,G.defineMessages)({pagetitlebasic:{id:"providerlist.pagetitle.basic",defaultMessage:"ProviderMatch"},pagetitlewithquery:{id:"providerlist.pagetitle.withquery",defaultMessage:"{searchTerm} - ProviderMatch"},pagetitlewithqueryandlocation:{id:"providerlist.pagetitle.withqueryandlocation",defaultMessage:"{searchTerm} in {location} - ProviderMatch"},pagedescriptionbasic:{id:"providerlist.pagedescription.basic",defaultMessage:"ProviderMatch"},pagedescriptionwithquery:{id:"providerlist.pagedescription.withquery",defaultMessage:"{searchTerm} - ProviderMatch"}});const Be=function(e){var t,a,i=e.searchSummary,r=i.search_description||"",o=i.display_location||i.location||"";return r&&o?(t=je.pagetitlewithqueryandlocation,a=je.pagedescriptionwithquery):r?(t=je.pagetitlewithquery,a=je.pagedescriptionwithquery):(t=je.pagetitlebasic,a=je.pagedescriptionbasic),c.createElement(Re.xb,{titleMessageDescriptor:t,titleMessageDescriptorValues:{searchTerm:r,location:o},metaMessageDescriptors:[{name:"description",contentMessageDescriptor:a,contentMessageDescriptorValues:{searchTerm:r}}]})};var De=a(39226),qe=a(43018),Fe=a(87509),Le=a(85640),Te=a(86527),He=a(8674),Ge=a(26624),Ve=a(62957),ze=a(73190),Qe=a(74407),We=a(78841),Ke=a(71777),Xe=a(50409);function $e(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,i)}return a}function Je(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?$e(Object(a),!0).forEach((function(t){(0,g.Z)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):$e(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var Ye=(0,G.defineMessages)({providerlistheader:{id:"providerlist.header",defaultMessage:"Search results"},providerlistexpandedradiuswarning:{id:"providerlist.expandedradius",defaultMessage:'No providers found within {originalDistance, plural, one {# mile} other {# miles}}, showing all results for "{searchDescription}"'},bannerCloseAriaLabel1:{id:"banner.close.arialLabel1",defaultMessage:"close"}}),et=function(e){(0,U.Z)(r,e);var t,a,i=(t=r,a=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,i=(0,B.Z)(t);if(a){var r=(0,B.Z)(this).constructor;e=Reflect.construct(i,arguments,r)}else e=i.apply(this,arguments);return(0,j.Z)(this,e)});function r(){var e;return(0,A.Z)(this,r),(e=i.call(this)).state={toggle:!1,isAvailabilityModalOpen:!1,availableAppt:null,patientRel:"",purpose:null,purposeHasNoAvailability:null,patientRelHasNoAvailability:null,shouldHidePatientRel:!1},e.handleOnChangeSwitch=e.handleOnChangeSwitch.bind((0,N.Z)(e)),e.handleEditClick=e.handleEditClick.bind((0,N.Z)(e)),e.handleCloseModal=e.handleCloseModal.bind((0,N.Z)(e)),e.handleConfirmModal=e.handleConfirmModal.bind((0,N.Z)(e)),e.onPatientRelSelect=e.onPatientRelSelect.bind((0,N.Z)(e)),e.onSelectPurpose=e.onSelectPurpose.bind((0,N.Z)(e)),e.onClickShowAvailability=e.onClickShowAvailability.bind((0,N.Z)(e)),e.onAvailabilityTilesLoaded=e.onAvailabilityTilesLoaded.bind((0,N.Z)(e)),e}return(0,I.Z)(r,[{key:"componentDidMount",value:function(){var e=this.props,t=e.location,a=e.setPatientRel,i=e.setPurpose,r=e.fetchGlobalPurposesByPatientRel,o=e.log,n=e.slotsByProviderId,s=e.fetchSlots,l=e.history;n&&Object.entries(n).forEach((function(e){var t=(0,h.Z)(e,2),a=t[0],i=t[1].apptInfo;s(i,[a])}));var c=z.parse(t.search.substring(1)),d=c.filter&&Array.isArray(c.filter)&&c.filter.length&&Object.assign.apply(Object,(0,Z.Z)((0,ie.f_)(c.filter))),p=d&&d[Ge.mn];if(p){var u=d[Ge.Gm];this.setState({purpose:{name:p},patientRel:u,availableAppt:{patientRel:u,purpose:p},toggle:!0}),a(u),i(p),u&&r(u,o)}if(c.relationship&&c.purpose){var g=Je({},c);delete g.relationship,delete g.purpose,l.push("/search?".concat(z.stringify(g)))}}},{key:"componentDidUpdate",value:function(e){var t,a=this.props,i=a.totalProviders,r=a.loading,o=a.searchSummary,n=a.history,s=a.getUpdatedSearch,l=a.location,c=a.searchContext,d=a.apptInfo,p=a.log,u=a.fetchGlobalPurposesByPatientRel,h=z.parse(l.search.substring(1)),g=e.location.search!==l.search,v=(null==e||null===(t=e.searchSummary)||void 0===t?void 0:t.search_query)&&e.searchSummary.search_query!==o.search_query;if(v||g){var m={providerId:null},f=g&&null==h.filter;(v||f)&&(this.props.resetAvailability(),m=Je(Je({},m),{},{availableAppt:null,patientRel:"",purpose:null,toggle:!1})),this.setState(m)}var y=parseInt(o.distance,10);if((i!==e.totalProviders||r!==e.loading||y!==e.searchSummary.distance||n!==e.history||s!==e.getUpdatedSearch)&&0==i&&!r&&y>0){var b=s([{action:"append",key:"distance",value:0}]);n.push(b,{originalDistance:y})}c!==e.searchContext&&d.relationship&&u(d.relationship,p)}},{key:"reset",value:function(){var e=this.state,t=e.patientRel,a=e.purpose,i=this.props,r=i.history,o=i.getUpdatedSearch,n=i.config.visibility.schedulingVisibility;this.props.resetAvailability(),this.setState({availableAppt:null,patientRel:"",purpose:null});var s=["".concat(Ge.Gm,":").concat(t),"".concat(Ge.mn,":").concat(a.name),"".concat(Ge.p8,".").concat(n)];r.push(o([{action:"delete_key_value",key:"filter",value:s}]))}},{key:"handleOnChangeSwitch",value:function(){var e=this,t=this.props.log;this.setState((function(e){return{toggle:!e.toggle}})),this.state.providerId&&this.setState({isAvailabilityModalOpen:!0,patientRel:"",providerId:null},(function(){e.onPatientRelSelect("new")})),this.state.availableAppt?(t("user_action.show.provider_availability_toggle_off"),this.reset()):(t("user_action.show.provider_availability_toggle_on"),this.setState({isAvailabilityModalOpen:!0,patientRel:"new",providerId:null}),this.onPatientRelSelect("new")),this.setState({shouldHidePatientRel:!1}),(0,We.Se)()}},{key:"handleEditClick",value:function(){(0,this.props.log)("user_action.show.provider_availability_toggle_edit"),this.setState({isAvailabilityModalOpen:!0}),(0,We.Se)()}},{key:"handleCloseModal",value:function(){var e,t,a=this.state.availableAppt,i=!!a;i?(e=a.patientRel,t={name:a.purpose}):(e="",t=null),this.setState({isAvailabilityModalOpen:!1,patientRel:e,purpose:t,toggle:i,providerId:null,purposeHasNoAvailability:null,patientRelHasNoAvailability:null})}},{key:"handleConfirmModal",value:function(){var e=this.state,t=e.purpose,a=e.patientRel,i=e.providerId,r=this.props,o=r.setPurpose,n=r.setPatientRel,s=r.getUpdatedSearch,l=r.history,c=r.fetchSlots,d=r.config.visibility.schedulingVisibility,p=i?null:{patientRel:a,purpose:t.name};if(p){this.setState({isAvailabilityModalOpen:!1,availableAppt:p,providerId:null,purpose:i?null:t,patientRel:i?null:a});var u=[{action:"append",key:"filter",value:["".concat(Ge.Gm,":").concat(a),"".concat(Ge.mn,":").concat(t.name),Ge.os,"".concat(Ge.p8,".").concat(d)]}];l.push(s(u))}else this.setState({isAvailabilityModalOpen:!1,providerId:i});n(a),o(t.name),i&&c({relationship:a,purpose:t.name},[i])}},{key:"onPatientRelSelect",value:function(e){var t=this,a=this.props,i=a.apptInfo,r=a.fetchGlobalPurposesByPatientRel,o=a.log,n=this.state,s=n.providerId,l=n.availableAppt;o("user_action.provider_availability_type_selected",{patient_rel:e}),this.setState((function(a){var i={patientRel:e,purpose:null,purposeHasNoAvailability:!1};if(null!=a.providerId&&null!=t.props.availablePurposesByProviderId&&null!=t.props.availablePurposesByProviderId[t.state.providerId]){var r=t.props.availablePurposesByProviderId[t.state.providerId];i.patientRelHasNoAvailability=!r[e].size}return i}),(function(){return(!s||l)&&!i.purposeOptions[e].length&&r(e,o)}))}},{key:"onSelectPurpose",value:function(e){if(this.props.log("user_action.appt_purpose_type_selected",{appt_purpose:e}),this.state.providerId){var t=this.props.availablePurposesByProviderId[this.state.providerId];this.setState({purpose:e,purposeHasNoAvailability:!t[this.state.patientRel].has(e.name)})}this.setState({purpose:e})}},{key:"onClickShowAvailability",value:function(e){var t=this.props,a=t.config,i=t.log,r=t.fetchPurposesByProviderId;i("user_action.show.provider_availability_tile",{provider_id:e.id});var o=(0,ie.BU)(e,a.direct_book.hide_patient_rel_for_locations),n=o?"established":"";this.state.providerId?this.setState({isAvailabilityModalOpen:!0,providerId:e.id,patientRel:n,purpose:null,shouldHidePatientRel:o}):this.setState({isAvailabilityModalOpen:!0,providerId:e.id,patientRel:n,shouldHidePatientRel:o}),r(e.id,i),(0,We.Se)()}},{key:"shouldOpenDirectBookSameWindow",value:function(){var e=this.props.config.active_modules,t=new Set(void 0===e?[]:e);return!(!t.size||!t.has(Ge.qz.DIRECT_BOOK))}},{key:"onAvailabilityTilesLoaded",value:function(e,t){var a=this.props,i=a.providerId,r=a.log;this.state.providerId===i&&r("user_action.show_show_available_appt_times",{provider_id:t,count:e.length})}},{key:"getPhoneNumberForSelectedProvider",value:function(e,t){if(e){var a=t.find((function(t){return e===t.id}));if(a)return(0,Ve.lx)(a)}return null}},{key:"getSelectedProvider",value:function(){var e=this;return this.props.providers.find((function(t){return e.state.providerId===t.id}))}},{key:"render",value:function(){var e,t,a=this.props,i=a.searchSummary,r=a.config,o=a.facets,n=a.getUpdatedSearch,s=a.providers,d=a.totalProviders,p=a.totalPages,u=a.suggestions,h=a.topSpecialties,g=a.log,v=a.loading,m=a.slotsCountLoading,f=a.error,y=a.showMobileFacets,b=a.toggleMobileFacets,S=a.distanceSort,_=a.sortOptions,P=a.apptInfo,E=a.availabilityButtonsConfig,k=a.location,M=a.searchProviderIds,w=a.slotsByProviderId,C=a.slotsStatusByProviderId,R=void 0===C?{}:C,O=a.history,x=a.tokens,Z=a.customerCode,A=a.productName,I=a.alerts,N=a.intl,U=(0,Ke.g)(r)?function(e,t){var a=s.find((function(t){return t.id===e}));a&&O.push(t,{provider:{location:k,provider:a}})}:void 0,j=r.display_availability_in_search;if(f)return c.createElement("div",null,c.createElement(de.Z,{loading:v||m}),c.createElement(Le.Z,null));var B=this.state,D=B.availableAppt,F=B.patientRel,T=B.isAvailabilityModalOpen,V=B.purpose,z=B.shouldHidePatientRel,Q=k.state&&k.state.originalDistance,K=this.shouldOpenDirectBookSameWindow()?"_self":void 0;0==d?(H()(u)||v||g("user_action.search_results.spell_suggestion_available",{suggestions:L()(u,"display_text").toString(),search_query:i.search_query}),t=c.createElement(ce,{suggestions:u,topSpecialties:h,getUpdatedSearch:n,searchQuery:i.search_query,log:g,history:O})):t=c.createElement($.ZP,{providers:s,customerCode:Z,productName:A,config:r,searchSummary:i,log:g,slots:w,slotsStatus:R,onClickShowAvailability:this.onClickShowAvailability,availabilityLinkTarget:K,onTimeSlotsClick:function(e,t,a,i){if(g("user_action.provider_timeslot_selected_search",{date:e,time:t,provider_id:a}),(0,Ke.g)(r)){var o=s.find((function(e){return e.id===a}));o&&O.push(i,{provider:{location:k,provider:o}})}},onViewMoreClick:U,onAvailabilityTilesLoaded:this.onAvailabilityTilesLoaded,profileSummaryParams:{from:$.w2},tokens:x});var J=(0,ie.n6)(s),Y=r.emergency_disclaimer_md&&r.emergency_disclaimer_md.enabled,ee=s&&s.some((function(e){return Boolean(e.book_online_url)}))||P.relationship&&P.purpose&&!M.length,te=(0,ze.cm)(i.query_string),ae=o&&o.find((function(e){return"locations.primary_marketable_location_id"===e.field})),re=null==r||null===(e=r.search_results_page)||void 0===e?void 0:e.search_facet_chips,oe=d>0&&(0,ze.vh)(r)&&ae&&ae.total>0;return c.createElement("main",{className:"search-container mt-m"},c.createElement("div",null,c.createElement(Be,{searchSummary:i}),Y?c.createElement(pe.zM,{bannerConfig:r.emergency_disclaimer_md,action1AriaLabel:N.formatMessage(Ye.bannerCloseAriaLabel1)}):c.createElement(pe.Nr,{config:r,action1AriaLabel:N.formatMessage(Ye.bannerCloseAriaLabel1)}),c.createElement(de.Z,{loading:v||m}),oe&&c.createElement(qe.Z,{backgroundImgUrl:Fe.x,linkUrl:te,forMobile:!0,onClick:function(e){(0,Qe.nn)(e,g,te,O)}},c.createElement(X(),{size:"60px"}))),c.createElement("section",{className:"row mt-m"},c.createElement("div",null,c.createElement("h1",{className:"sr-only"},c.createElement(G.FormattedMessage,Ye.providerlistheader)),c.createElement(pe.PJ,{totalProviders:d,toggleMobileFacets:b})),c.createElement("aside",{className:"col-md-3"},c.createElement(ue.Z,{showMobileFacets:y,searchSummary:i,sortOptions:_,totalProviders:d,log:g,getUpdatedSearch:n,toggleMobileFacets:b,facets:o,distanceSort:S,showLocationFacet:!0,config:r,history:O,tokens:x})),c.createElement("section",{className:"col-md-9 results","aria-busy":v?"true":"false"},c.createElement(De.R,{config:r,searchAlerts:I}),q()(d)&&c.createElement(pe.ZP,{totalProviders:d,searchSummary:i,sortOptions:_,log:g,getUpdatedSearch:n}),!v&&Q&&c.createElement(W(),{"data-testid":"ExpandedSearchRadiusBanner",className:"mt-m mb-m",type:"warning",icon:"!"},c.createElement(G.FormattedMessage,(0,l.Z)({},Ye.providerlistexpandedradiuswarning,{values:{originalDistance:Q,searchDescription:i.search_description}}))),j&&!this.props.hasFetchingSlotCountsFailed&&(!v||i.search_query)&&ee&&c.createElement(ve.k4,null,c.createElement(Te.Z,{handleEdit:this.handleEditClick,handleToggle:this.handleOnChangeSwitch,selectedAppointment:D})),re&&c.createElement(_e,{facets:o,getUpdatedSearch:n,searchSummary:i}),c.createElement(He.Z,{patientRel:D&&!F&&D.patientRel||F,purpose:D&&!F&&!V&&{name:D.purpose}||V,isOpen:T,onPatientRelSelect:this.onPatientRelSelect,onSelectPurpose:this.onSelectPurpose,handleCloseModal:this.handleCloseModal,handleConfirmModal:this.handleConfirmModal,patientRelOptions:this.state.providerId?(0,ie.Jh)(this.getSelectedProvider(),r.visibility.schedulingVisibility):P.purposeOptions,providerDisplayName:this.state.providerId&&(0,Ve.hf)(this.getSelectedProvider()),providerPhone:this.getPhoneNumberForSelectedProvider(this.state.providerId,s),availabilityButtonsConfig:E,isPurposeLoading:P.loading,log:g,patientRelHasNoAvailability:this.state.patientRelHasNoAvailability,purposeHasNoAvailability:this.state.purposeHasNoAvailability,hidePatientRel:z,apptPurposeFilterProps:(0,Xe.x)({intl:N,config:r})}),t,c.createElement(Ue,{searchSummary:i,showDisclaimer:J,totalPages:p,getUpdatedSearch:n,config:r,log:g}))))}}]),r}(c.Component);const tt=(0,V.Z)((0,G.injectIntl)(et));var at=a(95744);function it(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,i)}return a}function rt(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?it(Object(a),!0).forEach((function(t){(0,g.Z)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):it(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var ot=(0,i.$j)((function(e,t){var a=(0,o.Mb)(e),i=a.direct_book,r=(i=void 0===i?{}:i).patient_type,n=(r=void 0===r?{}:r).buttons,s=void 0===n?[]:n,l=b()(a,"location_facet.custom_sort_order","distance"),c=(0,M.rY)(e,(0,S.Gf)(e)),d=(0,E.h)(e),p=(0,k.t)(e),u=(0,P.V)(e),h={loading:e.availability.loading,purposeOptions:e.availability.purposeOptions};e.availability&&e.availability.patientRel&&e.availability.purpose&&(h=rt(rt({},h),{},{relationship:e.availability.patientRel,purpose:e.availability.purpose}));var g=(0,S.R2)(e),v=t.location;return rt({customerCode:e.customerCode,productName:(0,at.i)(e),config:a,log:function(a){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=(0,R.H4)({state:e});t.log(a,rt(rt({},i),r))},distanceSort:l,providers:c,loading:d,slotsCountLoading:p,getUpdatedSearch:function(e){return(0,S.pm)(a,g,v,e)},error:u,apptInfo:h,availabilityButtonsConfig:s,searchProviderIds:e.search.providerIds,slotsByProviderId:e.availability.slotsByProviderId,slotsStatusByProviderId:e.availability.slotsStatusByProviderId,hasFetchingSlotCountsFailed:e.availability.hasFetchingSlotCountsFailed,availablePurposesByProviderId:e.availability.availablePurposesByProviderId,tokens:(0,w.I)(e)},(0,S.yn)(e))}),(function(e){return(0,f.DE)({fetchProviders:S.lm,fetchProviderSlotCounts:S.eA,toggleMobileFacets:S.$s,setPatientRel:_.Rv,setPurpose:_.p6,resetAvailability:_.Ml,fetchGlobalPurposesByPatientRel:_.MF,fetchPurposesByProviderId:_.ji,fetchSlots:_.XP},e)}))((function(e){var t=e.customerCode,a=e.searchSummary,i=e.location,r=e.log,o=e.fetchProviders,n=e.fetchProviderSlotCounts,s=e.loading,l=e.config,d=e.tokens,p=e.getUpdatedSearch,g=e.history,v=(0,x.d)({config:l,customerCode:t,bcsToken:null==d?void 0:d.bcsToken}),f=v.patientZip,y=v.patientZipSearchLocation,b=v.patientZipPending,S=(0,c.useState)(b),_=(0,h.Z)(S,2),P=_[0],E=_[1];return(0,c.useEffect)((function(){b||(y&&!a.location&&g.push(p([{action:"append",key:"location",value:y},{action:"append",key:"display_location",value:f},{action:"delete_key",key:"distance"}])),E(!1))}),[b,y,a.location]),(0,c.useEffect)((function(){function e(){return(e=(0,u.Z)(m().mark((function e(){return m().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!P){e.next=2;break}return e.abrupt("return");case 2:if(i.search===(null==a?void 0:a.query_string)){e.next=9;break}return e.next=5,o(i);case 5:return e.next=7,n(i);case 7:e.next=11;break;case 9:return e.next=11,n(i);case 11:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[i.search,P]),(0,c.useEffect)((function(){s||r("user_action.search_results.view_search_results",a)}),[null==a?void 0:a.query_string,s]),(0,c.useEffect)((function(){r((0,O.qX)(C.L1.SEARCH_RESULTS))}),[]),c.createElement(tt,e)}));ot.prototype.serverSideExecute=function(){var e=(0,u.Z)(m().mark((function e(t){var a,i,r,o,n,s,l,c,d,p;return m().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=t.req,r=t.res,o=t.store,n=this.selector.props,s=n.fetchProviders,l=n.config,c=n.location,null==l||null===(a=l.third_party)||void 0===a||!a.cerner_healthelife){e.next=4;break}return e.abrupt("return");case 4:return e.next=6,s(c,{req:i});case 6:d=o.getState(),(p=d.search)&&0===p.totalProviders&&r.status(404);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}();const nt=ot;var st=a(51235),lt=a(9463);const ct=(0,i.$j)((function(e){return{settings:(0,r.T)(e),config:(0,o.Mb)(e),searchWidgetConfig:(0,n.G)(e),customerCode:(0,s.m)(e)}}))((function(e){var t,a=e&&e.location&&e.location.state&&e.location.state.redirect_error;return c.createElement(lt.Z,(0,l.Z)({},e,{placement:(t=e,"/"===t.location.pathname?C.Ct.SEARCH:C.Ct.SEARCH_RESULTS)}),c.createElement(d.Z,null,a&&c.createElement(p.Z,{component:st.Z}),c.createElement(p.Z,{exact:!0,path:"/"}),c.createElement(p.Z,{path:"/*search",render:function(t){return c.createElement(nt,(0,l.Z)({},t,{log:e.log}))}}),c.createElement(p.Z,{path:"/specialty/:specialty/near/:location",render:function(t){return c.createElement(nt,(0,l.Z)({},t,{log:e.log}))}}),c.createElement(p.Z,{path:"/specialty/:specialty",render:function(t){return c.createElement(nt,(0,l.Z)({},t,{log:e.log}))}}),c.createElement(p.Z,{component:Le.Z})))}))}}]);